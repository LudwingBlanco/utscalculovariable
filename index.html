<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Millonario CÃ¡lculo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #0f0c29;
      color: white;
    }
    .opcion-btn {
      background-color: #14213d;
      color: white;
      border: 2px solid #fca311;
      transition: transform 0.2s;
    }
    .opcion-btn:hover {
      background-color: #1f2a48;
      transform: scale(1.05);
    }
    .correcta {
      background-color: #2a9d8f !important;
      color: white;
    }
    .incorrecta {
      background-color: #e63946 !important;
      color: white;
    }
    #btnActivarSonido {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #fca311;
      color: black;
      padding: 10px 20px;
      border-radius: 9999px;
      font-weight: bold;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      cursor: pointer;
      z-index: 9999;
      transition: background-color 0.3s ease;
    }
    #btnActivarSonido:hover {
      background-color: #d18e00;
    }
    .container {
      max-width: 400px;
      margin: auto;
      padding: 20px;
      background-color: #1b1b2f;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    }
    h1, h2 {
      text-align: center;
    }
    .text-yellow-400 {
      font-size: 1.5rem;
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

  <audio id="musicaFondo" src="song.mp3" autoplay loop muted></audio>

  <div id="app" class="container">
    <div id="inicio" class="space-y-4 animate-fade-in">
      <h1 class="text-3xl font-bold text-yellow-400">Â¿QuiÃ©n quiere ser millonario? - CÃ¡lculo</h1>
      <input type="text" id="nombre" placeholder="Ingresa tu nombre" class="w-full px-4 py-2 border rounded-xl text-black" />
      <button id="btnIniciar" class="w-full bg-yellow-500 text-black py-2 rounded-xl hover:bg-yellow-600 transition">Comenzar</button>
    </div>

    <div id="juego" class="hidden space-y-4 animate-fade-in">
      <div class="text-center">
        <h2 id="usuario" class="text-lg font-semibold"></h2>
        <p id="dinero" class="text-yellow-400 font-bold">Dinero: $0 COP</p>
      </div>
      <div>
        <img id="pregunta" class="w-full rounded-lg" src="" alt="Pregunta" />
        <div id="opciones" class="space-y-2 mt-2"></div>
      </div>
      <div class="flex justify-between gap-2 mt-4">
        <button id="btnPista50" class="flex-1 bg-blue-500 text-white py-2 rounded-xl hover:bg-blue-600 transition">50/50</button>
        <button id="btnPistaAmigo" class="flex-1 bg-green-500 text-white py-2 rounded-xl hover:bg-green-600 transition">Llamada a un amigo</button>
      </div>
    </div>

    <div id="final" class="hidden text-center space-y-4 animate-fade-in">
      <h2 class="text-xl font-bold text-yellow-400">Â¡Juego terminado!</h2>
      <p id="resultado" class="text-lg"></p>
      <button onclick="location.reload()" class="bg-yellow-500 text-black py-2 px-4 rounded-xl hover:bg-yellow-600 transition">Jugar de nuevo</button>
    </div>
  </div>

  <button id="btnActivarSonido" style="display:none;">Activar Sonido ðŸ”Š</button>

  <script>
    if (localStorage.getItem('juegoJugado')) {
      alert("Ya has jugado una vez. No puedes jugar de nuevo.");
      document.body.innerHTML = "<h1 class='text-center text-yellow-400'>Juego ya completado</h1>";
    } else {
      document.addEventListener("DOMContentLoaded", () => {
        document.getElementById("btnIniciar").addEventListener("click", iniciarJuego);
        document.getElementById("btnPista50").addEventListener("click", usarPista50);
        document.getElementById("btnPistaAmigo").addEventListener("click", usarPistaAmigo);

        const musica = document.getElementById("musicaFondo");
        musica.volume = 0.4;

        const playPromise = musica.play();

        playPromise.then(() => {
          document.getElementById("btnActivarSonido").style.display = "none";
        }).catch(() => {
          const btnSonido = document.getElementById("btnActivarSonido");
          btnSonido.style.display = "block";
          btnSonido.addEventListener("click", () => {
            musica.muted = false;
            musica.play();
            btnSonido.style.display = "none";
          });
        });
      });
    }

    const preguntas = [
      {
        preguntaImg: "p1.png",
        opciones: [
          "A) Dâƒ—áµ¤f(2,1) = 2 + 6âˆš3",
          "B) Dâƒ—áµ¤f(2,1) = 5 - âˆš2",
          "C) Dâƒ—áµ¤f(2,1) = 4 + 2âˆš5",
          "D) Dâƒ—áµ¤f(2,1) = âˆš2 + 3"
        ],
        correcta: 0
      },
      {
        preguntaImg: "p2.png",
        opciones: [
          "A) Dâƒ—áµ¤f(6,âˆ’2) = âˆ’2âˆš2",
          "B) Dâƒ—áµ¤f(6,âˆ’2) = âˆ’4/âˆš10",
          "C) Dâƒ—áµ¤f(6,âˆ’2) = âˆš2",
          "D) Dâƒ—áµ¤f(6,âˆ’2) = 5/2"
        ],
        correcta: 1
      },
      {
        preguntaImg: "p3.png",
        opciones: [
          "A) Dâƒ—áµ¤f(x,y) = xâˆš2 + y",
          "B) Dâƒ—áµ¤f(x,y) = âˆš2(x + y)",
          "C) Dâƒ—áµ¤f(x,y) = 2xy",
          "D) Dâƒ—áµ¤f(x,y) = xÂ² + yÂ²"
        ],
        correcta: 1
      },
      {
        preguntaImg: "p4.png",
        opciones: [
          "A) Dâƒ—áµ¤f(x,y) = (âˆš5x âˆ’ 4y)/(3x + y)",
          "B) Dâƒ—áµ¤f(x,y) = (5âˆš3/4 + 1) Â· 1/âˆš(5x âˆ’ 4y)",
          "C) Dâƒ—áµ¤f(x,y) = xÂ³y/2",
          "D) Dâƒ—áµ¤f(x,y) = ln(5x âˆ’ 4y)"
        ],
        correcta: 1
      },
      {
        preguntaImg: "p5.png",
        opciones: [
          "A) âˆ‡f(1,1) = (6, 3)",
          "B) âˆ‡f(1,1) = (2, 5)",
          "C) âˆ‡f(1,1) = (âˆ’1, 1)",
          "D) âˆ‡f(1,1) = (3, 6)"
        ],
        correcta: 0
      },
      {
        preguntaImg: "p6.png",
        opciones: [
          "A) âˆ‡f(1,2,2) = (4, 3, âˆ’5)",
          "B) âˆ‡f(1,2,2) = (0, âˆ’2, âˆ’3)",
          "C) âˆ‡f(1,2,2) = (âˆ’12, âˆ’1, âˆ’16)",
          "D) âˆ‡f(1,2,2) = (2, âˆ’2, 1)"
        ],
        correcta: 2
      }
    ];

    let nombreUsuario = "";
    let dinero = 0;
    let indicePregunta = 0;
    let pistaUsada50 = false;
    let pistaUsadaAmigo = false;
    let respondido = false;

    function iniciarJuego() {
      const nombreInput = document.getElementById("nombre").value.trim();
      if (!nombreInput) return alert("Por favor ingresa tu nombre");
      nombreUsuario = nombreInput;

      localStorage.setItem('juegoJugado', 'true');

      document.getElementById("inicio").classList.add("hidden");
      document.getElementById("juego").classList.remove("hidden");
      document.getElementById("usuario").textContent = `Jugador: ${nombreUsuario}`;
      mostrarPregunta();
    }

    function mostrarPregunta() {
      if (indicePregunta >= preguntas.length) {
        terminarJuego();
        return;
      }

      respondido = false;
      const pregunta = preguntas[indicePregunta];
      document.getElementById("pregunta").src = pregunta.preguntaImg;

      const contenedorOpciones = document.getElementById("opciones");
      contenedorOpciones.innerHTML = "";

      pregunta.opciones.forEach((opcion, i) => {
        const btn = document.createElement("button");
        btn.textContent = opcion;
        btn.className = "w-full opcion-btn py-2 px-4 rounded-xl transition";
        btn.addEventListener("click", () => verificarRespuesta(i, btn));
        contenedorOpciones.appendChild(btn);
      });
    }

    function verificarRespuesta(i, btn) {
      if (respondido) return;
      respondido = true;

      const pregunta = preguntas[indicePregunta];
      const botones = document.querySelectorAll('#opciones button');
      const correctoAudio = new Audio('https://assets.mixkit.co/sfx/download/mixkit-correct-answer-reward-952.wav');
      const incorrectoAudio = new Audio('https://assets.mixkit.co/sfx/download/mixkit-wrong-answer-fail-notification-946.wav');

      botones.forEach(b => b.disabled = true);

      if (i === pregunta.correcta) {
        dinero += 100000;
        btn.classList.add("correcta");
        document.getElementById("dinero").textContent = `Dinero: $${dinero} COP`;
        correctoAudio.play();
        setTimeout(() => {
          indicePregunta++;
          mostrarPregunta();
        }, 1200);
      } else {
        btn.classList.add("incorrecta");
        incorrectoAudio.play();
        setTimeout(() => {
          indicePregunta++;
          mostrarPregunta();
        }, 1200);
      }
    }

    function usarPista50() {
      if (pistaUsada50) return alert("Ya usaste la pista 50/50 para esta pregunta.");
      alert("Elimina dos respuestas incorrectas (simulado)");
      pistaUsada50 = true;
    }

    function usarPistaAmigo() {
      if (pistaUsadaAmigo) return alert("Ya usaste la pista 'Llamada a un amigo' para esta pregunta.");
      alert("Tu amigo dice que la respuesta correcta es la primera opciÃ³n.");
      pistaUsadaAmigo = true;
    }

    function terminarJuego() {
      document.getElementById("juego").classList.add("hidden");
      document.getElementById("final").classList.remove("hidden");
      document.getElementById("resultado").textContent = `${nombreUsuario}, ganaste un total de $${dinero} COP`;
    }
  </script>

  <style>
    @keyframes fade-in {
      from { opacity: 0; transform: scale(0.98); }
      to { opacity: 1; transform: scale(1); }
    }
    .animate-fade-in {
      animation: fade-in 0.5s ease-out;
    }
  </style>
</body>
</html>
